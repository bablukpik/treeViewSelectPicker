<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Select with Tree View</title>
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <link rel="stylesheet" href="css/dropdowntree.css">-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <link rel="stylesheet" href="css/dropdowntree.css">
    <link rel="stylesheet" href="css/bootstrap-select.min.css">
</head>
<body>
    <br><br>
    <div class="container">
        <div class="row">
            <div class="col-sm-4">
                <div class="treeview-selectpicker">
                    <select name="partTwo[]" class="selectpicker" multiple data-live-search="true" data-actions-box="true" style="display: inline;">
                        <option value="value1">Mustard</option>
                        <option value="value4">Ketchup</option>
                        <option value="value7">Relish</option>
                    </select>
                    <div style="display: inline;" class="dropdown dropdown-tree" id="firstDropDownTree"></div>
                </div>
            </div>
            <div class="col-sm-4">
                <!--<div class="dropdown dropdown-tree" id="firstDropDownTree"></div>-->
            </div>
        </div>
    </div>


    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="js/dropdowntree.js"></script>
    <script src="js/bootstrap-select.min.js"></script>

    <script>
        var arr4=[
            {title:"St Fatima",href:"#1",dataAttrs:[{title:"id",data:"value1"}]},
            {title:"Korba",href:"#2",dataAttrs:[{title:"id",data:"value4"}]},
            {title:"Roxi",href:"#3",dataAttrs:[{title:"id",data:"value7"}]}
        ];

        var arr3=[
            {title:"Abbas Al Akkad",href:"#1",dataAttrs:[{title:"id",data:"value1"}]},
            {title:"Makram Obeid",href:"#2",dataAttrs:[],data:arr4},
            {title:"Mostafa Al Nahas",href:"#3",dataAttrs:[{title:"id",data:"value7"}]}
        ];

        var arr2=[
            {title:"Teriumph",href:"#1",dataAttrs:[] ,data:arr3},
            {title:"Safir",href:"#2",dataAttrs:[{title:"id",data:"value4"}]},
            {title:"El-Hegaz Sq",href:"#3",dataAttrs:[{title:"id",data:"value7"}]}
        ];

        var arr=[
            {title:"Heliopolis",href:"#1",dataAttrs:[], data: arr2},
            {title:"Nasr City",href:"#2",dataAttrs:[{title:"id",data:"value4"}]},
            {title:"Down Town",href:"#3",dataAttrs:[],data:arr3}
        ];

        var options = {
            title : '<span class="glyphicon glyphicon-option-horizontal" aria-hidden="true"></span>',
            data: arr,
            maxHeight: 300,
            clickHandler: function(element){
                // console.log($(element).GetParents());
                // $("#firstDropDownTree").SetTitle($(element).find("a").first().text());
                // console.log("Selected Elements",$("#firstDropDownTree").GetSelected());
            },
            expandHandler: function(element,expanded){
               // console.log("expand",element,expanded);
            },
            checkHandler: function(element,checked){
                // console.log("check",element,checked);
                let selectedOpt = [];
                $.each(($("#firstDropDownTree").GetSelected()), function (key, val) {
                    // console.log($(val).attr("data-id"));
                    selectedOpt.push($(val).attr("data-id"));
                });
                $(".selectpicker").val(selectedOpt).change();
            },
            closedArrow: '<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>',
            openedArrow: '<span class="glyphicon glyphicon-minus" aria-hidden="true"></span>',
            multiSelect: true,
            selectChildren: true,
        };

        $("#firstDropDownTree").DropDownTree(options);

    </script>
</body>
</html>